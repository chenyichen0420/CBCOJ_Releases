**Warning: This version is no longer under maintenance, and there is no guarantee that there will be no issues or vulnerabilities.**

### Supported Platforms

| Executable file group | Windows | Linux |
| :--: | :--: | :--: |
| Backend | Supported | Not supported |
| Frontend | Supported | Not supported |

## Step 1: Download

Download binary files from Release v4.24.074. Please ensure that the executable file downloaded is for the corresponding platform.

Extract backend.rar to a folder, and frontend.rar to another.

## Step 2: Backend settings

Raw content structure of rar:

```
│  account.ini
│  basic_setting.ini
│  CBCOJ_Server.exe
│  log.txt
│  rc.txt
│
├─rec
├─work
├─work1
├─work2
└─pb
   │  setting.ini
   │
   └─aplusb
           setting.txt
           spj.cpp
           spj.exe
           test1.in
           test1.out
           test2.in
           test2.out
```

The `account.ini` follows the following setting format:

- The first line contains the count of accounts.
- Next, each line stores information for a single account.
- For each line, store the username, password, and user ID in sequence, separated by a space.

The `basic_setting.ini` follows the following setting format:

- The first line contains the number of judging threads.
- The second line contains the folder where stores source codes waiting for judging.
- The following lines contain the working folder for each judging threads.
- The next line contains the folder for the problem base.
- The next line contains the folder which stores all the judging results.
- The next line contains the path of g++ compiler.

`log.txt` is the log file generated by `CBCOJ_Server.exe`, and is safe to remove if `CBCOJ_Server.exe` isn't running.

`rc.txt` is a file which stores the submission id. Do not remove or change it directly!

`pb/setting.ini` stores the configuration of problems, with 'pb' stands for the folder you configured as problem base. `pb/setting.ini` follows the following setting format:

- The first line contains the number of problems.
- The following lines contain the name of each problem.

The configuration of each problem must be saved under a folder with the same name configured in `pb/setting.ini` in the folder 'pb'.

All test data should be put inside this folder. If special judge is needed, put the executable file required by SPJ in this directory as well. 'setting.txt' follows the following setting format:

- The first line contains the account of testcases, the file name required for file reading and writing (`*.in/out`), and the name of the executable file required by SPJ, separated with spaces.
- If you don't wan't SPJ, then fill `fc` in replace of it.
- The following lines contain the configuration of each testcases, including input/out file name (`*.in/out`), time limit (ms), and memory limit (MiB).

That's all of backend configurations.

## Step 3: Frontend settings

Raw content structure of rar:

```
│  config.json
│  server.exe
│
├─admin
│  │  ...
│  │
│  └─assets
│          ...
│
└─public
    │  ...
    │
    ├─api
    ├─files
    ├─login
    │      ...
    │
    ├─problem
    │      aplusb.html
    │
    ├─records
    ├─submit
    │      ...
    │
    └─templates
       ...
```

Here, `...` indicats the omission of some irrelevant things.

The `config.json` follows the following setting format:

- Number "port" refers to the port number of the user website.
- Number "adport" refers to the port number of the admin website.
- String "ip" refers to the IPv4 number of the judger machine.
- Array "adaccount" refers to the accounts used to login to the admin website.
- Elements in Array "adaccount" should take the form of `{"username":"","password":""}`, with each represents a pair of username and password used to login.
- For elements in Array "adaccount", string username refers to the username of an account.
- For elements in Array "adaccount", string password refers to the password of an account.

In folder `public/files`, you can store anything you want, and it can be accessed through the following website: `yourwebsite/files/filename`.

In folder `public/problem`, you can config the statement of the problems. The file name (without file extension) must be the same as the problem name.

That's all of frontend configurations.

## Step 4: Start service

Start backend first, and then the frontend.

The website is now available on `localhost:port`, here "port" refers to the configured value of "port" in `config.json` in frontend folder.

## Function

Login, View problems, Submit, Get judge result.

When login, you need to turn to page `yourwebsite/login`, fill in the two blanks according to the instructions, and you will login successfully.

![](https://github.com/chenyichen0420/CBCOJ_Releases/blob/main/statics/Login-paswd.png)

![](https://github.com/chenyichen0420/CBCOJ_Releases/blob/main/statics/Login-success.png)

You can get a problem list from page `yourwebsite/problem?page=...`.

![](https://github.com/chenyichen0420/CBCOJ_Releases/blob/main/statics/Problemlist.png)

Hit one of the problem, and you can view the statement of that problem.

![](https://github.com/chenyichen0420/CBCOJ_Releases/blob/main/statics/Viewproblem.png)

Once you had a solution to that problem, you can hit the submit button bellow, and fill in the blanks according to the instructions.

![](https://github.com/chenyichen0420/CBCOJ_Releases/blob/main/statics/Submit-code.png)

Click submit button, and wait for a while. Once your code is judged, the webpage will automatically jump to the result page.

![](https://github.com/chenyichen0420/CBCOJ_Releases/blob/main/statics/Result.png)

### Note

In fact, the rars includes a configured ready-to-use environment. All the above images are screenshots taken from running the default configuration environment.

The screenshot of the submission interface contains the correct code for that problem.

### About CBCOJ APJ support

It's a bit strange, unwise, but reasonable that CBCOJ don't supports `testlib.h`. We calls your SPJ executable with cmd lines: `spj.exe inputfile_path answerfile_path outputfile_path`.

Bellow is an example program of problem aplusb's SPJ(which is exactly the cpp in raw content of the backend rar):

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(int argc,char**argv){
	ifstream in(argv[1]);
	ifstream ans(argv[2]);
	ifstream out(argv[3]);
	int av,ov;
	ans >> av;
	out >> ov;
	if(ov == av*2) return 0;
	return 1;
} 
```

If your program thinks the answer is correct, please return 0. This is because runtime error usually doesn't returns 0, which shows that the user's output is ill-formed(probably).
